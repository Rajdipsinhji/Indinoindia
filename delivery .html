<!DOCTYPE html>
<html lang="gu">
<head>
  <meta charset="UTF-8">
  <title>Delivery Panel - Indino</title>
  <style>
    body {
      font-family: sans-serif;
      background: #fff3e0;
      padding: 20px;
    }
    .order-box {
      background: #fff;
      border: 1px solid #ffcc80;
      padding: 10px;
      border-radius: 10px;
      margin: 10px 0;
    }
    .hidden { display: none; }
    #popupNotify {
      position: fixed;
      top: 10px;
      right: 10px;
      background: #ff5722;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 1em;
      display: none;
      z-index: 9999;
    }
  </style>
</head>
<body>
  <div id="popupNotify">ğŸ”” àª¨àªµà«‹ àª“àª°à«àª¡àª° àª®àª³à«àª¯à«‹!</div>
  <audio id="orderSound" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" preload="auto"></audio>

  <div id="loginBox">
    <h2>ğŸ›µ àª¡àª¿àª²àª¿àªµàª°à«€ àª¬à«‹àª¯ àª²à«‹àª—àª¿àª¨</h2>
    <input type="password" id="deliveryPass" placeholder="àªªàª¾àª¸àªµàª°à«àª¡ àª²àª–à«‹">
    <button onclick="checkDeliveryLogin()">Login</button>
  </div>

  <div id="deliveryPanel" class="hidden">
    <h2>ğŸ“¦ àª“àª°à«àª¡àª° àª²àª¿àª¸à«àªŸ</h2>
    <div id="orderList"></div>
  </div>

  <script>
    let lastCount = 0;

    function checkDeliveryLogin() {
      const pass = document.getElementById("deliveryPass").value;
      if (pass === "1481999") {
        document.getElementById("loginBox").style.display = "none";
        document.getElementById("deliveryPanel").classList.remove("hidden");
        showOrders(true);
        setInterval(() => showOrders(false), 5000);
      } else {
        alert("âŒ àª–à«‹àªŸà«‹ àªªàª¾àª¸àªµàª°à«àª¡");
      }
    }

    function showOrders(first) {
      const list = JSON.parse(localStorage.getItem("indino_orders") || "[]");
      const box = document.getElementById("orderList");
      box.innerHTML = "";
      if (!first && list.length > lastCount) {
        document.getElementById("orderSound").play();
        document.getElementById("popupNotify").style.display = "block";
        setTimeout(() => popupNotify.style.display = "none", 4000);
      }
      lastCount = list.length;
      list.forEach((o, i) => {
        if (!o.delivered) {
          const d = document.createElement("div");
          d.className = "order-box";
          d.innerHTML = `
            <p>ğŸ” ${o.food}</p>
            <p>ğŸ‘¤ ${o.name} | ğŸ“± ${o.mobile}</p>
            <p>ğŸ¡ ${o.village}, ${o.society}</p>
            <button onclick="markDelivered(${i})">âœ… àª“àª°à«àª¡àª° àª®àª³à«àª¯à«‹</button>
          `;
          box.appendChild(d);
        }
      });
    }

    function markDelivered(i) {
      const list = JSON.parse(localStorage.getItem("indino_orders") || "[]");
      list[i].delivered = true;
      localStorage.setItem("indino_orders", JSON.stringify(list));
      showOrders(true);
    }
  </script>
</body>
</html>